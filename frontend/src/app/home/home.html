<!-- Home Page Content -->
<main class="flex-1 w-full" style="background: linear-gradient(135deg, #000000 0%, #0a0010 50%, #000015 100%); margin: 0 !important; padding: 0 !important;">
  <!-- Notice Banner -->
  <section class="pt-4 pb-2 lg:pt-6 lg:pb-4" style="margin: 0 !important;">
    <div class="max-w-7xl mx-auto px-2 sm:px-4">
      <div class="mb-6">
        <h1 class="hidden">Homepage</h1>
        <div class="mt-0 mb-2">
          <div class="neon-banner p-2 sm:p-3 overflow-hidden rounded-lg">
            <div class="animate-marquee whitespace-nowrap text-sm sm:text-base neon-text">
              <span>
                {{ noticeMessage }}
                <a
                  href="https://t.me/SNOWDENEMPIRE"
                  target="_blank"
                  class="neon-text-pink hover:neon-text transition-colors"
                  >@SNOWDENEMPIRE</a
                >
              </span>
            </div>
          </div>
        </div>
        <h3 class="text-center mb-0 text-xl sm:text-2xl font-bold neon-text-purple" style="text-shadow: 0 0 10px #9d00ff, 0 0 20px #9d00ff;">
          Latest Deals
        </h3>
      </div>

      <!-- Loading State -->
      <div *ngIf="loading" class="text-center py-8">
        <div
          class="inline-block animate-spin rounded-full h-8 w-8 neon-spinner"
        ></div>
        <p class="mt-2 neon-text text-sm sm:text-base">Loading products...</p>
      </div>

      <!-- Products Grid -->
      <div
        *ngIf="!loading && products.length > 0"
        class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-6"
        id="cl-body"
      >
        <div class="col-span-1" *ngFor="let product of products; let i = index">
          <div
            class="bg-dark-4 rounded-xl cursor-pointer overflow-hidden"
            [ngClass]="(i % 3 === 0) ? 'product-card-neon-1' : (i % 3 === 1) ? 'product-card-neon-2' : 'product-card-neon-3'"
            (click)="viewProduct(product)"
          >
            <div class="p-0">
              <!-- Product Image Section -->
              <div class="text-center relative p-2 sm:p-4">
                <div class="absolute top-1 sm:top-2 left-1 sm:left-2 z-10">
                  <span class="neon-sale-badge text-xs px-1 sm:px-2 py-1 rounded font-bold"
                    >Sale</span
                  >
                </div>
                <a (click)="viewProduct(product); $event.stopPropagation()" class="cursor-pointer block">
                  <img
                    [src]="ProductUtils.getProductImage(product)"
                    [alt]="ProductUtils.getProductAltText(product)"
                    class="mb-2 sm:mb-3 mx-auto h-32 sm:h-40 w-full object-cover rounded-md"
                    style="filter: brightness(0.95) contrast(1.1);"
                  />
                </a>
              </div>

              <!-- Product Info Section -->
              <div class="p-2 sm:p-4 bg-dark-4 rounded-b-xl">
                <div class="text-xs sm:text-sm mb-1">
                  <a
                    (click)="viewProduct(product); $event.stopPropagation()"
                    class="neon-text-pink hover:neon-text cursor-pointer transition-colors"
                  >
                    <small
                      >{{ ProductUtils.getProductCategory(product) }}</small
                    >
                  </a>
                </div>

                <div class="mb-2 sm:mb-3">
                  <h2 class="text-sm sm:text-base font-medium neon-text">
                    <a
                      (click)="viewProduct(product); $event.stopPropagation()"
                      class="text-inherit no-underline hover:neon-text-pink cursor-pointer transition-colors"
                    >
                      {{ product.name }}
                    </a>
                  </h2>
                </div>

                <!-- Stock Status -->
                <div class="mb-1 sm:mb-2">
                  <span
                    class="text-xs font-medium"
                    [ngClass]="product.stockQuantity > 0 ? 'neon-text' : 'text-red-400'"
                    style="text-shadow: 0 0 5px currentColor;"
                  >
                    {{ ProductUtils.getStockStatus(product) }}
                  </span>
                </div>

                <!-- Price Section -->
                <div class="mt-2 sm:mt-3 flex justify-between items-center mb-2 sm:mb-3">
                  <span class="neon-text-pink font-bold text-sm sm:text-base" style="text-shadow: 0 0 8px #FF33CC;">
                    {{ ProductUtils.getProductPrice(product) }}
                  </span>
                </div>

                <!-- Add to Cart Button -->
                <button
                  (click)="addToCart(product, $event)"
                  (touchend)="addToCart(product, $event)"
                  [disabled]="product.stockQuantity <= 0"
                  type="button"
                  class="neon-button w-full py-2 px-3 sm:py-2.5 sm:px-4 rounded-lg text-xs sm:text-sm font-medium flex items-center justify-center space-x-1 sm:space-x-2"
                  style="
                    touch-action: manipulation !important;
                    -webkit-tap-highlight-color: rgba(0, 255, 255, 0.3) !important;
                    min-height: 44px !important;
                    min-width: 100% !important;
                    position: relative !important;
                    z-index: 10 !important;
                    pointer-events: auto !important;
                    cursor: pointer !important;
                  "
                >
                  <svg
                    class="w-4 h-4 sm:w-5 sm:h-5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    style="pointer-events: none;"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"
                    ></path>
                  </svg>
                  <span style="pointer-events: none;">
                    {{ product.stockQuantity > 0 ? 'Add to Cart' : 'Out of Stock' }}
                  </span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- No Products Message -->
      <div *ngIf="!loading && products.length === 0" class="text-center py-8">
        <p class="neon-text text-sm sm:text-base">No products found.</p>
      </div>

      <!-- Pagination -->
      <div 
        *ngIf="!loading && totalPages >= 1" 
        class="pagination-container mt-6 sm:mt-8 mb-6 sm:mb-8"
        style="
          display: flex !important; 
          visibility: visible !important; 
          opacity: 1 !important;
          position: relative !important;
          z-index: 1000 !important;
          width: 100% !important;
          background: transparent !important;
          padding: 2rem 0 !important;
          margin: 2rem 0 !important;
          clear: both !important;
        "
      >
        <nav 
          class="flex items-center justify-center flex-wrap gap-2 mx-auto"
          style="
            display: flex !important; 
            visibility: visible !important;
            opacity: 1 !important;
            position: relative !important;
            z-index: 101 !important;
            width: 100% !important;
            max-width: 100% !important;
            background: transparent !important;
          "
        >
          <!-- Previous Button -->
          <button
            (click)="previousPage()"
            [disabled]="currentPage === 1 || totalPages <= 1"
            type="button"
            class="neon-button-pagination-prev neon-button rounded-md px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium"
            style="
              touch-action: manipulation !important; 
              -webkit-tap-highlight-color: transparent !important; 
              min-height: 48px !important; 
              min-width: 100px !important; 
              display: inline-flex !important; 
              align-items: center !important;
              justify-content: center !important;
              visibility: visible !important; 
              opacity: 1 !important;
              position: relative !important;
              z-index: 1001 !important;
              cursor: pointer !important;
              margin: 0 8px !important;
              background: linear-gradient(135deg, rgba(0, 255, 255, 0.9), rgba(157, 0, 255, 0.9)) !important;
              border: 3px solid #00FFFF !important;
              box-shadow: 0 0 30px rgba(0, 255, 255, 1), 0 0 60px rgba(0, 255, 255, 0.8), inset 0 0 30px rgba(0, 255, 255, 0.5) !important;
              color: #FFFFFF !important;
              font-weight: 700 !important;
            "
          >
            <span class="hidden sm:inline neon-button-text" style="color: #FFFFFF !important; text-shadow: 0 0 5px #000000, 0 0 10px #000000 !important; font-weight: 700 !important;">Previous</span>
            <span class="sm:hidden neon-button-text" style="color: #FFFFFF !important; text-shadow: 0 0 5px #000000, 0 0 10px #000000 !important; font-weight: 700 !important;">Prev</span>
          </button>

          <!-- Page Numbers -->
          <div 
            class="flex items-center flex-wrap justify-center gap-1"
            style="
              display: flex !important;
              visibility: visible !important;
              opacity: 1 !important;
              position: relative !important;
              z-index: 102 !important;
              background: transparent !important;
              gap: 4px !important;
            "
          >
            <button
              *ngFor="let page of pageNumbers"
              (click)="page > 0 ? goToPage(page) : null"
              [disabled]="page < 0 || totalPages <= 1"
              [ngClass]="{
                'neon-button-active': page === currentPage,
                'neon-ellipsis': page < 0,
                'neon-button': page > 0 && page !== currentPage
              }"
              class="neon-button-pagination-page px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-all"
              [style.background]="page === currentPage ? 'linear-gradient(135deg, #00FFFF, #9d00ff) !important' : 'linear-gradient(135deg, rgba(0, 255, 255, 0.9), rgba(157, 0, 255, 0.9)) !important'"
              [style.color]="page === currentPage ? '#000000 !important' : '#FFFFFF !important'"
              [style.font-weight]="page === currentPage ? '700 !important' : '700 !important'"
              style="
                touch-action: manipulation !important; 
                -webkit-tap-highlight-color: transparent !important; 
                min-height: 48px !important; 
                min-width: 48px !important; 
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                visibility: visible !important; 
                opacity: 1 !important;
                position: relative !important;
                z-index: 1002 !important;
                cursor: pointer !important;
                margin: 0 4px !important;
                border: 3px solid #00FFFF !important;
                box-shadow: 0 0 30px rgba(0, 255, 255, 1), 0 0 60px rgba(0, 255, 255, 0.8), inset 0 0 30px rgba(0, 255, 255, 0.5) !important;
              "
              type="button"
            >
              <span *ngIf="page > 0 && page === currentPage" class="neon-button-text-active" style="display: inline-block !important; visibility: visible !important; opacity: 1 !important; color: #000000 !important; font-weight: 700 !important; text-shadow: none !important;">{{ page }}</span>
              <span *ngIf="page > 0 && page !== currentPage" class="neon-button-text" style="display: inline-block !important; visibility: visible !important; opacity: 1 !important; color: #FFFFFF !important; font-weight: 700 !important; text-shadow: 0 0 5px #000000, 0 0 10px #000000 !important;">{{ page }}</span>
              <span *ngIf="page < 0" class="neon-text-purple" style="display: inline-block !important; visibility: visible !important; opacity: 1 !important; color: #9d00ff !important; font-weight: 700 !important; text-shadow: 0 0 10px #9d00ff !important;">...</span>
            </button>
          </div>

          <!-- Next Button -->
          <button
            (click)="nextPage()"
            [disabled]="currentPage === totalPages || totalPages <= 1"
            type="button"
            class="neon-button-pagination-next neon-button rounded-md px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium"
            style="
              touch-action: manipulation !important; 
              -webkit-tap-highlight-color: transparent !important; 
              min-height: 48px !important; 
              min-width: 100px !important; 
              display: inline-flex !important;
              align-items: center !important;
              justify-content: center !important;
              visibility: visible !important; 
              opacity: 1 !important;
              position: relative !important;
              z-index: 1001 !important;
              cursor: pointer !important;
              margin: 0 8px !important;
              background: linear-gradient(135deg, rgba(0, 255, 255, 0.9), rgba(157, 0, 255, 0.9)) !important;
              border: 3px solid #00FFFF !important;
              box-shadow: 0 0 30px rgba(0, 255, 255, 1), 0 0 60px rgba(0, 255, 255, 0.8), inset 0 0 30px rgba(0, 255, 255, 0.5) !important;
              color: #FFFFFF !important;
              font-weight: 700 !important;
            "
          >
            <span class="neon-button-text" style="display: inline-block !important; visibility: visible !important; opacity: 1 !important; color: #FFFFFF !important; text-shadow: 0 0 5px #000000, 0 0 10px #000000 !important; font-weight: 700 !important;">Next</span>
          </button>
        </nav>
      </div>

      <!-- Page Info -->
      <div
        *ngIf="!loading && total > 0"
        class="mt-4 text-center text-xs sm:text-sm neon-text-purple px-2"
        style="text-shadow: 0 0 5px #9d00ff;"
      >
        Showing {{ (currentPage - 1) * pageSize + 1 }} to {{
        Math.min(currentPage * pageSize, total) }} of {{ total }} products
      </div>
    </div>
  </section>
  
  <!-- Bottom spacing to ensure content reaches footer -->
  <div style="min-height: 2rem; width: 100%;"></div>
</main>
